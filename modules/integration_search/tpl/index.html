<include target="header.html" />
<load target="../../module/tpl/js/module_list.js" />

<div cond="$XE_VALIDATOR_MESSAGE && $XE_VALIDATOR_ID == 'modules/integration_search/tpl/index/1'" class="message {$XE_VALIDATOR_MESSAGE_TYPE}">
	<p>{$XE_VALIDATOR_MESSAGE}</p>
</div>

<form ruleset="insertConfig" action="./" method="post" class="x_form-horizontal">
	<input type="hidden" name="act" value="procIntegration_searchAdminInsertConfig" />
	<input type="hidden" name="module" value="admin" />
	<input type="hidden" name="xe_validator_id" value="modules/integration_search/tpl/index/1" />
	<section class="section">
		<h1>{$lang->subtitle_primary}</h1>

		<div class="x_control-group">
			<label for="sample_code" class="x_control-label">{$lang->sample_code}</label>
			<div class="x_controls" style="margin-right:14px">
				<textarea id="sample_code" readonly style="width:100%;height:100px;cursor:text;font-family:'Courier New', Courier, monospace">{$sample_code}</textarea>
				<p class="x_help-block">{$lang->about_sample_code}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="layout_srl">{$lang->layout}</label>
			<div class="x_controls">
				<select name="layout_srl" id="layout_srl">
					<option value="0">{$lang->notuse}</option>
					<option loop="$layout_list => $key, $val" value="{$val->layout_srl}" selected="selected"|cond="$config->layout_srl== $val->layout_srl">{$val->title} ({$val->layout})</option>
				</select>
				<a href="#layout_help" class="x_icon-question-sign" data-toggle>{$lang->help}</a>
				<p id="layout_help" class="x_help-block" hidden>{$lang->about_layout}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label for="skin" class="x_control-label">{$lang->skin}</label>
			<div class="x_controls">
				<select name="skin" id="skin">
					<option loop="$skin_list => $key, $val"  value="{$key}" selected="selected"|cond="$config->skin == $key">{$val->title}</option>
				</select>
				<p class="x_help-inline">{$lang->about_skin}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->target}</label>
			<div class="x_controls">
				<select name="target">
					<option value="include">{$lang->include_search_target}</option>
					<option value="exclude" selected="selected"|cond="$config->target=='exclude'">{$lang->exclude_search_target}</option>
				</select>

				<input type="hidden" name="target_module_srl" id="target_module_srl" value="{$config->target_module_srl}" />
				<select class="modulelist_selected" size="8" multiple="multiple" style="display:block;vertical-align:top;margin:5px 0"></select>
				<a href="#" id="__module_srl_list_target_module_srl" class="x_btn moduleTrigger" data-multiple="true" style="margin:0 -5px 0 0;border-radius:2px 0 0 0px">{$lang->cmd_add}</a>
				<button type="button" class="x_btn modulelist_del" style="border-radius:0 2px 2px 0">{$lang->cmd_delete}</button>
				<p class="x_help-block"><strong>{$lang->about_target_module}</strong></p>
				<script>
					xe.registerApp(new xe.ModuleListManager('target_module_srl'));
				</script>
			</div>
		</div>
	</section>
	<section class="section">
		<h1>{$lang->ncp_cloud_search_settings}</h1>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->use}</label>
			<div class="x_controls">
				<label class="x_inline" for="use_ncp_cloud_search"><input type="checkbox" name="use_ncp_cloud_search" id="use_ncp_cloud_search" value="Y" checked="checked"|cond="$config->use_ncp_cloud_search == 'Y'" /> {$lang->use_ncp_cloud_search}</label>
				<a href="#use_ncp_cloud_search_help" class="x_icon-question-sign" data-toggle>{$lang->help}</a>
				<p id="use_ncp_cloud_search_help" class="x_help-block" hidden>{$lang->about_use_ncp_cloud_search}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="ncp_allowed_ip">{$lang->ncp_allowed_ip}</label>
			<div class="x_controls">
				<input type="text" name="ncp_allowed_ip" value="{$config->ncp_allowed_ip}" />
				<a href="#ncp_allowed_ip_help" class="x_icon-question-sign" data-toggle>{$lang->help}</a>
				<p id="ncp_allowed_ip_help" class="x_help-block" hidden>{$lang->about_ncp_allowed_ip}</p>
				<BR>{$lang->current_ip}: {$my_ip}
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="mlayout_srl">{$lang->ncp_access_key}</label>
			<div class="x_controls">
				<input type="text" required name="ncp_access_key" value="{$config->ncp_access_key}" />
				<a href="#ncp_access_key_help" class="x_icon-question-sign" data-toggle>{$lang->help}</a>
				<p id="ncp_access_key_help" class="x_help-block" hidden>{$lang->about_ncp_access_key}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="ncp_secret_key">{$lang->ncp_secret_key}</label>
			<div class="x_controls">
				<input type="text" required name="ncp_secret_key" value="{$config->ncp_secret_key}" />
				<a href="#ncp_secret_key_help" class="x_icon-question-sign" data-toggle>{$lang->help}</a>
				<p id="ncp_secret_key_help" class="x_help-block" hidden>{$lang->about_ncp_secret_key}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="idx_title">{$lang->domain_name}</label>
			<div class="x_controls">
				<input type="text" required name="domain_name" value="{$config->domain_name}" />
				<a href="#domain_name_help" class="x_icon-question-sign" data-toggle>{$lang->help}</a>
				<p id="domain_name_help" class="x_help-block" hidden>{$lang->about_domain_name}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="idx_title">{$lang->idx_title}</label>
			<div class="x_controls">
				<input type="text" required name="idx_title" value="{$config->idx_title}" />
				<a href="#idx_title_help" class="x_icon-question-sign" data-toggle>{$lang->help}</a>
				<p id="idx_title_help" class="x_help-block" hidden>{$lang->about_idx_title}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="idx_title">{$lang->all_docs_upload}</label>
			<div class="x_controls">
				<button class="x_btn" onclick="uploadDbAll(); return false;">{$lang->cmd_all_docs_upload}</button>
				<a href="#all_docs_upload_help" class="x_icon-question-sign" data-toggle>{$lang->help}</a>
				<p id="all_docs_upload_help" class="x_help-block" hidden>{$lang->about_all_docs_upload}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="use_cache">{$lang->cloud_search_cache_use}</label>
			<div class="x_controls">
				<label class="x_inline" for="use_cache"><input type="checkbox" name="use_cache" id="use_cache" value="Y" checked="checked"|cond="$config->use_cache == 'Y'" /> {$lang->about_cloud_search_cache_use}</label>
			</div>
		</div>
	</section>
	<section class="section">
		<h1>{$lang->mobile_settings}</h1>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->mobile_view}</label>
			<div class="x_controls">
				<label class="x_inline" for="use_mobile"><input type="checkbox" name="use_mobile" id="use_mobile" value="Y" checked="checked"|cond="$module_info->use_mobile == 'Y'" /> {$lang->about_mobile_view}</label>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="mlayout_srl">{$lang->mobile_layout}</label>
			<div class="x_controls">
				<select name="mlayout_srl" id="mlayout_srl">
					<option value="0">{$lang->notuse}</option>
					<option loop="$mlayout_list => $key, $val" value="{$val->layout_srl}" selected="selected"|cond="$config->mlayout_srl== $val->layout_srl">{$val->title} ({$val->layout})</option>
				</select>
				<a href="#mobile_layout_help" class="x_icon-question-sign" data-toggle>{$lang->help}</a>
				<p id="mobile_layout_help" class="x_help-block" hidden>{$lang->about_layout}</p>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="mskin">{$lang->mobile_skin}</label>
			<div class="x_controls">
				<select name="mskin" id="mskin">
					<option loop="$mskin_list=> $key, $val" value="{$key}" selected="selected"|cond="$config->mskin== $key">{$val->title}</option>
				</select>
				<a href="#mobile_skin_help" class="x_icon-question-sign" data-toggle>{$lang->help}</a>
				<p id="mobile_skin_help" class="x_help-block" hidden>{$lang->about_skin}</p>
			</div>
		</div>
	</section>
	<div class="btnArea">
		<button class="x_btn x_btn-primary" type="submit">{$lang->cmd_registration}</button>
	</div>
</form>

<!--- hidden form to upsert all docs into NCP cloud search begin ----->
<form action="./" method="post" id='frmUploadDbAll' name="frmUploadDbAll">
	<input type='hidden' name='module' id='module' value='integration_search'/>
	<input type='hidden' name='act' id='act' value='procIntegration_searchAdminUploadDbAll'/>
</form>
<script type="text/javascript">
function uploadDbAll()
{
	document.frmUploadDbAll.submit();
}
</script>
<!--- hidden form to upsert all docs into NCP cloud search end ----->